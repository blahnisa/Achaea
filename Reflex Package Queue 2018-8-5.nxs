{"name":"queue","enabled":true,"description":"QueueManagement","type":"group","id":1,"items":[{"type":"function","name":"queueAdd","enabled":true,"id":3,"code":"client.Queue.queueAdd = function(clradd, eqbal, command) {\n \tif(clradd == \"clear\") {\n        queueArray = [];\n    }\n    \n    queueArray.push([eqbal, command]);\n    //display_notice(\"1\");\n    //send_command(\"q\");\n    client.Queue.queueRun();\n}"},{"type":"function","name":"queueRun","enabled":true,"id":7,"code":"client.Queue.queueRun = function() {\n    //display_notice(\"0\");\n    \t\t\t\t\t//send_command(\"q\");\n    if(queueLock == 0){\n\t\tif(queueArray.length > 0){\n        \tif (get_variable(\"my_eq\") == 1 && get_variable(\"my_bal\") == 1){\n    \t\t\tfor (i = 0; i < queueArray.length; i++){\n            \t\tif(queueArray[i][0] == \"free\"){\n                    \tdisplay_notice(\"1\");\n    \t\t\t\t\tsend_command(\"q\");\n             \t    \tsend_command(queueArray[i - 1][1]);\n                \t\tqueueArray.splice(i - 1, 1);\n                    \tdisplay_notice(\"2\");\n    \t\t\t\t\tsend_command(\"q\");\n                    \ti = i - 1\n            \t\t}\n            \t}\n                if(queueArray.length > 0){\n    \t\t\t\tqueueLock = 1;\n    \t\t\t\tsetTimeout(function(){ queueLock = 0; }, 100);\n\t\t\t\t\tdisplay_notice(\"3\");\n    \t\t\t\tsend_command(\"q\");\n        \t\t\tsend_command(queueArray[0][1]);\n        \t\t\tqueueArray.splice(0, 1);\n            \t\tdisplay_notice(\"4\");\n    \t\t\t\tsend_command(\"q\");\n    \t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}"},{"type":"trigger","name":"","enabled":true,"id":8,"matching":"exact","whole_words":true,"case_sensitive":true,"text":"You have recovered balance on all limbs.","actions":[{"action":"script","script":"client.Queue.queueRun();"}]},{"type":"trigger","name":"","enabled":true,"id":9,"matching":"exact","whole_words":true,"case_sensitive":true,"text":"You have recovered equilibrium.","actions":[{"action":"script","script":"client.Queue.queueRun();"}]},{"type":"alias","name":"","enabled":true,"id":10,"matching":"exact","whole_words":true,"case_sensitive":true,"prefix_suffix":true,"actions":[{"action":"script","script":"queueLock = 0;\nclient.Queue = {};\nqueueArray = [];\nrun_function(\"queueAdd\", \"\", \"Queue\");\nrun_function(\"queueRun\", \"\", \"Queue\");"}],"text":"resetall"},{"type":"trigger","name":"","enabled":true,"id":12,"matching":"exact","whole_words":true,"case_sensitive":true,"text":"You must regain equilibrium first.","actions":[{"action":"highlight","highlight":"match","highlight_backref":"1","highlight_fg":"#ffffff","highlight_bg":"#ff0000"}]},{"type":"trigger","name":"","enabled":true,"id":13,"matching":"exact","whole_words":true,"case_sensitive":true,"text":"You must regain balance first.","actions":[{"action":"highlight","highlight":"match","highlight_backref":"1","highlight_fg":"#ffffff","highlight_bg":"#ff0000"}]},{"type":"alias","name":"","enabled":true,"id":14,"matching":"begins","whole_words":true,"case_sensitive":true,"prefix_suffix":true,"actions":[{"action":"script","script":"queueArray = [];\ndisplay_notice(\"Queue Cleared\", \"white\", \"blue\");"}],"text":"cq"},{"type":"alias","name":"","enabled":true,"id":15,"matching":"begins","whole_words":true,"case_sensitive":true,"prefix_suffix":true,"actions":[{"action":"script","script":"if (queueArray.length == 0){\n    display_notice(\"Queue Empty\", \"white\", \"blue\");\n} else {\n\tfor (i = 0; i < queueArray.length; i++) {\n    \tj = i + 1;\n\t\tdisplay_notice(j + \": \" + queueArray[i]);\n\t}\n}"}],"text":"q"},{"type":"function","name":"Startup","enabled":true,"id":18,"code":"queueLock = 0;\nclient.Queue = {};\nqueueArray = [];\nrun_function(\"queueAdd\", \"\", \"Queue\");\nrun_function(\"queueRun\", \"\", \"Queue\");"}]}